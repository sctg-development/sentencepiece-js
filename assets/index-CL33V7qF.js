import{r as w,m as y,a as o,j as e,C as R,F as v,T as F,b as L,B as P,c as A,d as z,e as E,f as I,g as O,w as B}from"./fluentui-react-components-D2jmtGPK.js";import{l as D,c as H,S as _}from"./sentencepiece-js-Dn1OKu1w.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();var j,g=w;j=g.createRoot,g.hydrateRoot;const M=y({root:{},field:{},textarea:{margin:"1em",display:"block",minHeight:"300px"},textareain:{width:"100%",maxHeight:"unset",minHeight:"300px",maxWidth:"unset"},result:{margin:"1em"},button:{}});function V(){const r=M(),a=o.useId(),i=o.useRef(null),d=o.useRef(null),[t,s]=o.useState(!1),[c,x]=o.useState(""),[h,b]=o.useState(0),[T,C]=o.useState(""),k=n=>{if(n.preventDefault(),n.dataTransfer.items&&n.dataTransfer.items[0].kind==="file"){const l=n.dataTransfer.items[0].getAsFile();if(l){const u=new FileReader;u.onload=f=>{var p;const m=(p=f.target)==null?void 0:p.result;x(m),i.current&&(i.current.value=m)},u.readAsText(l)}}},N=()=>{const n=new _;n.loadFromB64StringModel(D).then(()=>{const l=H(c),u=n.encodeIds(l),f=n.encodePieces(l),m=u.length;b(m),C(f.join(" "))})},S=()=>{s(!t)};return e.jsxs(R,{className:r.root,children:[e.jsx(v,{size:"small",className:r.field,children:e.jsx(F,{className:r.textarea,textarea:{className:r.textareain},appearance:"outline",size:"small",id:a,ref:i,placeholder:"Enter text or drop a text file",onDrop:k,onChange:n=>x(n.target.value)})}),e.jsxs(L,{style:{width:"unset"},className:r.result,block:!0,size:300,children:[e.jsx(P,{appearance:"primary",onClick:N,className:r.button,children:"Token count"}),h>0&&e.jsxs("div",{children:[h," ",e.jsx("a",{onClick:S,style:{cursor:"pointer"},children:"tokens"}),e.jsxs("span",{ref:d,style:{display:t?"inline":"none"},children:[":",e.jsx("br",{}),T]})]})]})]})}const W=y({card:{width:"80vw",maxWidth:"1024px"},footer:{}});function q(){const r=W();return e.jsx(e.Fragment,{children:e.jsxs(A,{className:r.card,size:"large",children:[e.jsx(z,{header:e.jsx(E,{children:e.jsx("b",{children:"LLama 3.1 Tokenizer and counter"})})}),e.jsx(V,{}),e.jsx(I,{className:r.footer,children:e.jsxs("b",{children:["Copyright 2024 ",e.jsx("a",{href:"https://github.com/sctg-development/sentencepiece-js",children:"Ronan Le Meillat"})]})})]})})}j(document.getElementById("root")).render(e.jsx(O,{theme:B,children:e.jsx(q,{})}));
